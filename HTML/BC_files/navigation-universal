"use strict";function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var _createClass=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),Beckman=window.Beckman||{},UniversalNavigationServices=function(){function n(){_classCallCheck(this,n);this._endpointUniversal="/api/bec/navigation/universal";this._mobileUniversalLinks=""}return _createClass(n,[{key:"firstItem",value:function(n){return'\n                <a href="'+n.url+'" class="logo-padding" target="'+n.target+'">\n                    <img src="'+n.imageSrc+'" class="ui image logo-fixed" alt="'+n.imageAlt+'" />\n                <\/a>\n                '}},{key:"menuItems",value:function(n,t){var u=n.icon?'<span class="lnr lnr-'+n.icon+'"><\/span>':"",e=null!==t&&t.toString()[0]>0,o,s,i,f,r;if("cart"==n.icon&&(u=1==e?u+'<span class="cart-items">'+t+"<\/span>":u+'<span class="cart-items hidden">0<\/span>'),i="",n.subMenuItems&&n.subMenuItems.length>0)for(f=0;f<n.subMenuItems.length;f++)r=n.subMenuItems[f],i+='<a href="'+r.url+'" class="menu-link" alt="'+r.alt+'" target="'+r.target+'">'+r.title+"<\/a>";else i=null;return o=i?'<div class="item-dropdown">'+i+"<\/div>":"",s="cart"==n.icon&&1==e?"parent-link-highlight":"",' <div class="menu-item">\n                    <a href="'+n.url+'" class="menu-link parent-link '+s+'" target="'+n.target+'" data-has-dropdown="'+(n.subMenuItems.length>0)+'">\n                        '+u+n.title+"\n                    <\/a>\n                    "+o+"       \n                <\/div>"}},{key:"mobileMenuItems",value:function(n,t,i){var u=n.icon?'<span class="lnr lnr-'+n.icon+'"><\/span>':"",s=null!==i&&i.toString()[0]>0,f,r,e,o;for("cart"==n.icon&&(u=1==s?u+'<span class="cart-items">'+i+"<\/span>":u+'<span class="cart-items hidden">0<\/span>'),f="",r=0;r<n.subMenuItems.length;r++)0===r&&(f+='<li> <a href= "'+n.url+'" target= "'+n.target+'" alt= "'+n.alt+'" >'+n.title+"<\/a><\/li>"),f+='<li> <a href= "'+n.subMenuItems[r].url+'" target= "'+n.subMenuItems[r].target+'" alt= "'+n.subMenuItems[r].alt+'" >'+n.subMenuItems[r].title+"<\/a><\/li>";return e='\n                <div class="mobile-links-group">\n                    <input type="checkbox" id="mobile-exp-link-group-'+t+'" name= "mobile-exp-link-group-'+t+'" value= "none" />\n                    <label class="group-title" for="mobile-exp-link-group-'+t+'">'+u+n.title+"<\/label >\n                    <ul>\n                        "+f+"\n                    <\/ul>\n                <\/div>",o='<a class="mobile-link-solo" href="'+n.url+'" target="'+n.target+'" alt="'+n.alt+'">'+u+" "+n.title+"<\/a> ",n.subMenuItems.length>0?e:o}},{key:"renderLinks",value:function(n){var i=$("#universal-nav-link"),r=$("#universal-nav-links-right"),u=$("#mobile-universal-nav"),f="",e="",o=n.itemsInCart>99?"99+":n.itemsInCart,t;for(i.find(".logo-padding").remove(),i.append(this.firstItem(n.first)),r.find(".menu-item").not("#universal-nav-country-language-link").remove(),t=0;t<n.menuItems.length;t++)f+=this.menuItems(n.menuItems[t],o);for(r.prepend(f),u.find(".menu-item").remove(),t=0;t<n.menuItems.length;t++)e+=this.mobileMenuItems(n.menuItems[t],t,o);u.prepend(e);$("#universal-navigation .menu-item .menu-link.parent-link").on("click touchend",window.Beckman.mobileNav.parentClicked)}},{key:"getUniversalNavLinks",value:function(){var n=jQuery.Deferred();return $.get(this._endpointUniversal,function(){}).done(function(t,i){n.resolve({data:t,status:i})}).fail(function(t,i){n.reject({data:t,status:i});console.log("navigation-universal getUniversalNavLinks() fail")}),n.promise()}},{key:"storeLoginURL",value:function(n){var i=n.menuItems,r="",t;if(i)for(t=0;t<i.length;t++)if((r=i[t].url.toLowerCase()).indexOf("login")>=0){Beckman.sessionStorageService&&Beckman.sessionStorageService.setByName(Beckman.enums.lookupKeys.loginURL,r);break}}},{key:"init",value:function(){var n=this;$.when(n.getUniversalNavLinks()).then(function(t){"success"===t.status&&(n.renderLinks(t.data),n.storeLoginURL(t.data))},function(n){console.log("Universal Navigation Links failed - status: "+n.status)},function(){})}}]),n}(),Init=function(){function n(){_classCallCheck(this,n)}return _createClass(n,[{key:"go",value:function(){(new UniversalNavigationServices).init()}}]),n}();$(void(Beckman.navigationUniversalInit=new Init))